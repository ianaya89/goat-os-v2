# -------------------------- SERVER --------------------------

# Port to run the app locally (default: 3000)
# Usage: PORT=3001 npm run dev
PORT=3000

ANALYZE=false
SKIP_ENV_VALIDATION=false # Set to true to skip env validation (useful for Docker builds)
NEXT_PUBLIC_LOG_LEVEL="info"

# Your production domain URL (e.g., "https://yourdomain.com")
# Leave empty or remove for Vercel deployments - it will auto-detect from VERCEL_URL
# Note: Update the port if you changed PORT above
NEXT_PUBLIC_SITE_URL="http://localhost:3000"

# -------------------------- AI --------------------------

# OpenAI API key for the AI chatbot feature
# Get your API key from https://platform.openai.com/api-keys
OPENAI_API_KEY="sk-..."

# -------------------------- ANALYTICS --------------------------

# Vercel Analytics & Speed Insights
# These are automatically configured when deployed to Vercel - no environment variables needed.
#
# IMPORTANT: You must enable these features in the Vercel Dashboard:
# 1. Go to https://vercel.com/dashboard
# 2. Select your project
# 3. For Analytics: Click "Analytics" tab → Click "Enable"
# 4. For Speed Insights: Click "Speed Insights" tab → Click "Enable"
#
# Without enabling in the dashboard, the @vercel/analytics and @vercel/speed-insights
# packages will not collect any data even though they are installed.

# -------------------------- AUTH --------------------------

# Better Auth - Authentication framework
# Docs: https://www.better-auth.com/docs
#
# Generate a new secret: run "npx @better-auth/cli secret" or "openssl rand -base64 32"
BETTER_AUTH_SECRET="G+yQTy4q+qj6VA6K76B5S8zmvpm3BvyXgJzIXhk0JMs="

# Google OAuth (optional) - for "Sign in with Google"
# Docs: https://www.better-auth.com/docs/authentication/social#google
#
# Setup:
# 1. Go to https://console.cloud.google.com/apis/credentials
# 2. Create a new OAuth 2.0 Client ID (Web application)
# 3. Add authorized redirect URI: https://yourdomain.com/api/auth/callback/google
#    - For local dev: http://localhost:3000/api/auth/callback/google
# 4. Copy the Client ID and Client Secret
GOOGLE_CLIENT_ID=""
GOOGLE_CLIENT_SECRET=""

# Cloudflare Turnstile (Captcha) - optional bot protection
# Docs: https://developers.cloudflare.com/turnstile/get-started/
# Get these from https://dash.cloudflare.com/?to=/:account/turnstile
# Leave empty to disable captcha
TURNSTILE_SECRET_KEY=""
NEXT_PUBLIC_TURNSTILE_SITE_KEY=""

# -------------------------- BILLING (Stripe) --------------------------

# Stripe - Payment processing
# Docs: https://docs.stripe.com/keys
#
# Get API keys from https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY="sk_test_..."
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY="pk_test_..."

# Webhook secret from https://dashboard.stripe.com/webhooks
# Create endpoint URL: https://yourdomain.com/api/webhooks/stripe
#
# Required webhook events (select these when creating the webhook):
#   - checkout.session.completed
#   - customer.subscription.created
#   - customer.subscription.updated
#   - customer.subscription.deleted
#   - customer.subscription.paused
#   - customer.subscription.resumed
#   - customer.subscription.trial_will_end
#   - customer.deleted
#   - invoice.paid
#   - invoice.payment_failed
#   - charge.refunded
#   - payment_intent.succeeded
#   - refund.created
#   - refund.updated
#   - refund.failed
#   - charge.dispute.created
#   - charge.dispute.updated
#   - charge.dispute.closed
#   - charge.dispute.funds_withdrawn
#   - charge.dispute.funds_reinstated
#
# For local development: stripe listen --forward-to localhost:3000/api/webhooks/stripe
STRIPE_WEBHOOK_SECRET="whsec_..."

# Stripe Price IDs - create in Stripe Dashboard > Products > Add Product > Add Price
# Use Price IDs (price_xxx), not Product IDs (prod_xxx)
NEXT_PUBLIC_STRIPE_PRICE_PRO_MONTHLY="price_..." # $29/month
NEXT_PUBLIC_STRIPE_PRICE_PRO_YEARLY="price_..." # $278/year
NEXT_PUBLIC_STRIPE_PRICE_LIFETIME="price_..." # $499 one-time

# Stripe Price IDs for credit packages
NEXT_PUBLIC_STRIPE_PRICE_CREDITS_STARTER="price_..." # $9.99 one-time
NEXT_PUBLIC_STRIPE_PRICE_CREDITS_BASIC="price_..." # $39.99 one-time
NEXT_PUBLIC_STRIPE_PRICE_CREDITS_PRO="price_..." # $149.99 one-time

# -------------------------- DATABASE --------------------------

POSTGRES_USER="postgres"
POSTGRES_PASSWORD="password"
POSTGRES_DB="database"
POSTGRES_HOST="localhost"
POSTGRES_PORT="5432"

DATABASE_URL="postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}"

# -------------------------- EMAIL --------------------------

# Resend - Transactional email service
# Free tier: 3,000 emails/month, 100 emails/day
#
# Setup Resend:
# 1. Go to https://resend.com and create an account
# 2. Add and verify your domain: Domains → Add Domain
#    - Add the DNS records (MX, TXT) to your domain registrar
#    - Wait for verification (usually a few minutes)
# 3. Create an API key: API Keys → Create API Key
#    - Permission: Sending access (or Full access)
# 4. Set EMAIL_FROM to an address on your verified domain
#
# For development, you can use Resend's test domain:
# EMAIL_FROM="onboarding@resend.dev" (only sends to your account email)
#
# Note: Contact email, phone and address are configured in config/app.config.ts
# (Previously NEXT_PUBLIC_CONTACT_EMAIL was an env variable - now in app.config.ts)

EMAIL_FROM="noreply@yourdomain.com"
RESEND_API_KEY=""

# -------------------------- MESSAGING (SMS/WhatsApp) --------------------------

# Sent.dm - Unified messaging API for SMS and WhatsApp
# Free tier: $5 credits, $0.015 per contact (up to 25k monthly active contacts)
#
# Setup Sent.dm:
# 1. Go to https://www.sent.dm and create an account
# 2. Get your Sender ID and API Key from the dashboard
# 3. Create message templates in the Sent.dm dashboard
#    (Template IDs must match those in lib/notifications/templates/messaging.ts)
#
# Supported channels: SMS, WhatsApp, iMessage, RCS, Viber
# Docs: https://docs.sent.dm

SENT_DM_SENDER_ID=""
SENT_DM_API_KEY=""

# -------------------------- BACKGROUND JOBS --------------------------

# Trigger.dev - Background job processing with retries
# Free tier: Pay-per-use, generous free tier
#
# Setup Trigger.dev:
# 1. Go to https://trigger.dev and create an account
# 2. Create a new project
# 3. Get your secret key from Project Settings > API Keys
# 4. Run `npx trigger.dev@latest dev` to start the local dev server
#
# Docs: https://trigger.dev/docs

TRIGGER_SECRET_KEY=""

# -------------------------- MONITORING --------------------------

# Sentry - Error monitoring and performance tracking
# Free tier: 5K errors, 10K performance units, 500 replays per month
#
# Setup Sentry:
# 1. Go to https://sentry.io and create an account
# 2. Create a new project → Select "Next.js"
# 3. Copy the DSN from the project settings
# 4. Get your org slug from Settings → General Settings
# 5. Get your project name from the project settings
# 6. Create an Auth Token: Settings → Auth Tokens → Create New Token
#    - Scopes needed: project:read, project:releases, org:read
#
# The app is pre-configured with @sentry/nextjs. Once these variables are set,
# errors will be automatically captured in both client and server.

SENTRY_ORG="my-org-slug"
SENTRY_PROJECT="my-project-name"
SENTRY_AUTH_TOKEN="sntrys_ey...."
NEXT_PUBLIC_SENTRY_DSN="https://123456789.ingest.de.sentry.io/123456789"
SENTRY_SUPPRESS_TURBOPACK_WARNING=1 # https://github.com/getsentry/sentry-javascript/blob/develop/packages/nextjs/src/config/withSentryConfig.ts#L156

# -------------------------- STORAGE --------------------------

# S3-compatible storage for file uploads (images, documents, etc.)
# This app uses the AWS S3 SDK which is compatible with many providers.
#
# RECOMMENDED: Cloudflare R2 (S3-compatible, cheapest option)
# - Free tier: 10GB storage, 10 million reads, 1 million writes per month
# - Requires credit card on file (but won't charge unless you exceed free tier)
#
# ALTERNATIVE for local development: MinIO
# - Run with Docker: docker run -p 9000:9000 -p 9001:9001 minio/minio server /data --console-address ":9001"
# - Access console at http://localhost:9001 (minioadmin/minioadmin)
# - Create the required buckets manually in the console
#
# REQUIRED BUCKETS (create these in your S3/R2/MinIO):
# 1. "images" - For profile photos, cover photos, and general images
# 2. "documents" - For medical documents, certificates, and PDFs
#
# Setup Cloudflare R2:
# 1. Go to https://dash.cloudflare.com → R2 Object Storage
# 2. Create TWO buckets: "images" and "documents"
# 3. Go to "Manage R2 API Tokens" → Create API Token
#    - Permissions: Object Read & Write
#    - Specify bucket: select BOTH buckets (or allow all)
# 4. Copy the Access Key ID and Secret Access Key
# 5. Configure CORS in EACH bucket settings (Settings > CORS Policy):
#    [
#      {
#        "AllowedOrigins": [
#          "http://localhost:3000",
#          "https://yourdomain.com"
#        ],
#        "AllowedMethods": [
#          "GET",
#          "POST",
#          "PUT",
#          "DELETE"
#        ],
#        "AllowedHeaders": [
#          "*"
#        ],
#        "ExposeHeaders": [
#          "ETag"
#        ],
#        "MaxAgeSeconds": 3600
#      }
#    ]
#
# AWS S3 Configuration Example (real AWS):
# S3_ENDPOINT=""  # Leave empty for real AWS S3
# S3_REGION="us-east-1"
# S3_ACCESS_KEY_ID="AKIAIOSFODNN7EXAMPLE"
# S3_SECRET_ACCESS_KEY="wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"
#
# Cloudflare R2 Configuration Example:
# S3_ENDPOINT="https://<ACCOUNT_ID>.r2.cloudflarestorage.com"
# S3_REGION="auto"
# S3_ACCESS_KEY_ID="<your-r2-access-key-id>"
# S3_SECRET_ACCESS_KEY="<your-r2-secret-access-key>"
#
# MinIO Local Configuration Example:
# S3_ENDPOINT="http://localhost:9000"
# S3_REGION="us-east-1"
# S3_ACCESS_KEY_ID="minioadmin"
# S3_SECRET_ACCESS_KEY="minioadmin"

# S3 credentials (REQUIRED for file uploads)
S3_ACCESS_KEY_ID=""
S3_SECRET_ACCESS_KEY=""
S3_ENDPOINT=""
S3_REGION="us-east-1"

# Single bucket for all storage (images, documents, etc.)
# The app uses prefixes to organize content: profile-photos/, cover-photos/, medical-documents/, etc.
S3_BUCKET="your-bucket-name"

# -------------------------- API ---------------------------

# External API access for AI agents (read-only)
# Master secret used to derive per-organization API keys via HMAC.
# Generate with: openssl rand -base64 32
# Then run: npm run cli → Generate API Key → to create per-org keys
API_SECRET_KEY=""
